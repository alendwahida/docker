pipeline {
    agent any
    stages {
        stage('Build-docker') {
		steps {
			sh 'docker container rm -f test-docker-1'
			sh 'docker build -t test-docker .'
			sh 'docker run -d --name test-docker-1 -p 4534:80 test-docker'
		}
	}
	stage('Test-docker') {
		steps {
			echo 'Testing !'
		}
	}
	stage('Deploy-docker') {
		steps {
			echo 'Deployed !'
		}
	}
    }
	post {
                always {
                        echo 'always !'
                }
                success {
                        echo 'success !'
                }
                failure {
                        echo ' Failed !'
                }
        }

}
